<!DOCTYPE html>
<html>

<head>
	<title>Leaflet Layers Control Example</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!--link rel="stylesheet" href="../dist/leaflet.css" /-->
	<link rel="stylesheet" href="leaflet.css" >
	<link rel="stylesheet" href="toggle.css" >

</head>



<body>
<p>Gwarus Erectus.</p>

	<div id="selman">

	</div>


<form action="#" id="rawr">
<select name="aa" onchange="loadPoly(this.value)"> 
<option value="">Please select</option>
<option value="Addiction Medicine" selected="selected"> Addiction Medicine</option>
<option value="All Other Suppliers">All Other Suppliers</option>
<option value="Allergy/Immunology">Allergy/Immunology</option>
<option value="Ambulance Service Supplier">Ambulance Service Supplier</option>
<option value="Ambulatory Surgical Center">Ambulatory Surgical Center</option>
<option value="Anesthesiologist Assistants">Anesthesiologist Assistants</option>
<option value="Anesthesiology">Anesthesiology</option>
<option value="Audiologist (billing independently)">Audiologist (billing independently)</option>
<option value="CRNA">CRNA</option>
<option value="Cardiac Electrophysiology">Cardiac Electrophysiology</option>
<option value="Cardiac Surgery">Cardiac Surgery</option>
<option value="Cardiology">Cardiology</option>
<option value="Certified Clinical Nurse Specialist">Certified Clinical Nurse Specialist</option>
<option value="Certified Nurse Midwife">Certified Nurse Midwife</option>
<option value="Chiropractic">Chiropractic</option>
<option value="Clinical Laboratory">Clinical Laboratory</option>
<option value="Clinical Psychologist">Clinical Psychologist</option>
<option value="Colorectal Surgery (formerly proctology)">Colorectal Surgery (formerly proctology)</option>
<option value="Critical Care (Intensivists)">Critical Care (Intensivists)</option>
<option value="Dermatology">Dermatology</option>
<option value="Diagnostic Radiology">Diagnostic Radiology</option>
<option value="Emergency Medicine">Emergency Medicine</option>
<option value="Endocrinology">Endocrinology</option>
<option value="Family Practice">Family Practice</option>
<option value="Gastroenterology">Gastroenterology</option>
<option value="General Practice">General Practice</option>
<option value="General Surgery">General Surgery</option>
<option value="Geriatric Medicine">Geriatric Medicine</option>
<option value="Geriatric Psychiatry">Geriatric Psychiatry</option>
<option value="Gynecological/Oncology">Gynecological/Oncology</option>
<option value="Hand Surgery">Hand Surgery</option>
<option value="Hematology">Hematology</option>
<option value="Hematology/Oncology">Hematology/Oncology</option>
<option value="Hospice and Palliative Care">Hospice and Palliative Care</option>
<option value="Independent Diagnostic Testing Facility">Independent Diagnostic Testing Facility</option>
<option value="Infectious Disease">Infectious Disease</option>
<option value="Internal Medicine">Internal Medicine</option>
<option value="Interventional Pain Management">Interventional Pain Management</option>
<option value="Interventional Radiology">Interventional Radiology</option>
<option value="Licensed Clinical Social Worker">Licensed Clinical Social Worker</option>
<option value="Mammographic Screening Center">Mammographic Screening Center</option>
<option value="Mass Immunization Roster Biller">Mass Immunization Roster Biller</option>
<option value="Maxillofacial Surgery">Maxillofacial Surgery</option>
<option value="Medical Oncology">Medical Oncology</option>
<option value="Multispecialty Clinic/Group Practice">Multispecialty Clinic/Group Practice</option>
<option value="Nephrology">Nephrology</option>
<option value="Neurology">Neurology</option>
<option value="Neuropsychiatry">Neuropsychiatry</option>
<option value="Neurosurgery">Neurosurgery</option>
<option value="Nuclear Medicine">Nuclear Medicine</option>
<option value="Nurse Practitioner">Nurse Practitioner</option>
<option value="Obstetrics/Gynecology">Obstetrics/Gynecology</option>
<option value="Occupational therapist">Occupational therapist</option>
<option value="Ophthalmology">Ophthalmology</option>
<option value="Optometry">Optometry</option>
<option value="Oral Surgery (dentists only)">Oral Surgery (dentists only)</option>
<option value="Orthopedic Surgery">Orthopedic Surgery</option>
<option value="Osteopathic Manipulative Medicine">Osteopathic Manipulative Medicine</option>
<option value="Otolaryngology">Otolaryngology</option>
<option value="Pain Management">Pain Management</option>
<option value="Pathology">Pathology</option>
<option value="Pediatric Medicine">Pediatric Medicine</option>
<option value="Peripheral Vascular Disease">Peripheral Vascular Disease</option>
<option value="Physical Medicine and Rehabilitation">Physical Medicine and Rehabilitation</option>
<option value="Physical Therapist">Physical Therapist</option>
<option value="Physician Assistant">Physician Assistant</option>
<option value="Plastic and Reconstructive Surgery">Plastic and Reconstructive Surgery</option>
<option value="Podiatry">Podiatry</option>
<option value="Portable X-ray">Portable X-ray</option>
<option value="Preventive Medicine">Preventive Medicine</option>
<option value="Psychiatry">Psychiatry</option>
<option value="Psychologist (billing independently)">Psychologist (billing independently)</option>
<option value="Public Health Welfare Agency">Public Health Welfare Agency</option>
<option value="Pulmonary Disease">Pulmonary Disease</option>
<option value="Radiation Oncology">Radiation Oncology</option>
<option value="Registered Dietician/Nutrition Professional">Registered Dietician/Nutrition Professional</option>
<option value="Rheumatology">Rheumatology</option>
<option value="Speech Language Pathologist">Speech Language Pathologist</option>
<option value="Sports Medicine">Sports Medicine</option>
<option value="Surgical Oncology">Surgical Oncology</option>
<option value="Thoracic Surgery">Thoracic Surgery</option>
<option value="Unknown Physician Specialty Code">Unknown Physician Specialty Code</option>
<option value="Urology">Urology</option>
<option value="Vascular Surgery">Vascular Surgery</option>
</select>
</form>


	<div id="map" style="width: 600px; height: 400px"></div>
	<script type="text/javascript" src="leaflet.js"></script>
<!--	<script type="text/javascript" src="refData.js"></script> -->
	<script type="text/javascript" src="refData1.js"></script>





	<script>

		function initmap() {

			var map = new L.map('map').setView([28, -82], 6);

		L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
			maxZoom: 18,
			id: 'examples.map-9ijuk24y'
		}).addTo(map);
			return map;
		}

		var map = initmap();
//		var map = initmap();



		function style(feature) {
			return {
				weight: 2,
				opacity: 0.2,
				smoothFactor: 50
//				blur: 40
//				color: 'white',
//				dashArray: '3',
//				fillOpacity: 0.7,
//				fillColor: getColor(feature.properties.density)
			};
		}

		function getColor(d) {
			return d > 100 ? '#800026' :
			       d > 80  ? '#BD0026' :
			       d > 50  ? '#E31A1C' :
			       d > 20  ? '#FC4E2A' :
			       d > 15   ? '#FD8D3C' :
			       d > 10   ? '#FEB24C' :
			       d > 5   ? '#FED976' :
			                  '#FFEDA0';
		}

  var polyline_options = {
      color: '#000'
	
  };


  function polyline_options1(val) {
	return {
//      	color: getColor(val),
		weight: 0,
//		fillOpacity: 0.2
		fillOpacity: 1.
	}
  };


	function createpoly(cent,res) {
		return ( [
		 [cent[0]+res,cent[1]-res*1.01],
		 [cent[0]+res,cent[1]+res*1.01],
		 [cent[0]-res,cent[1]+res*1.01],
		 [cent[0]-res,cent[1]-res*1.01]
		]);
	};


//	var markersList = [];


	function loadPoly(sname) {
	

//		map.reset;
//		map.reset()
		var indata = refData[sname]; 
		for (var i = 0; i < indata.length; i++) {	
			
/*			map = new L.map('map').setView([28, -82], 6);

			L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
				maxZoom: 18,
				id: 'examples.map-9ijuk24y'
			}).addTo(map);
*/
//			delete map;
//			map = initmap();
			var poly = new 	L.polygon(
				createpoly(indata[i]["latlon"],refData["res"])
				,polyline_options1(indata[i]["dist"])
				);

			poly["options"]["color"] = getColor(indata[i]["dist"]); 
//			poly["options"]["color"] = "#FFEDA0"; 
//			markersList.push(poly);
			map.addLayer(poly);
		}
		return map;	
	}


	function changePoly(sname) {

		var indata = refData[sname]; 
//		for (var i = 0; i < indata.length; i++) {	
		for (var i = 27; i < indata.length; i++) {	
			
//			markersList[i]["options"].setStyle({color: "#FFEDA0"}); 
			map._layers[i]["options"]["color"]= "#FFEDA0"; 
			map._layers[i].redraw();

		}
	}

//	var map = loadPoly("Badger");
//	var map = loadPoly("Addiction Medicine");
	var map = loadPoly("Geriatric Medicine");

//		window.map.removeLayer(window.polygon);
</script>

</body>

</html>

